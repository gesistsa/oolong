<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Overview • oolong</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Overview">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oolong</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/btm.html">BTM</a></li>
    <li><a class="dropdown-item" href="../articles/deploy.html">Deploy</a></li>
    <li><a class="dropdown-item" href="../articles/overview.html">Overview</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gesistsa/oolong/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Overview</h1>
                        <h4 data-toc-skip class="author">Chung-hong Chan
<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;GESIS&lt;/p&gt;"><sup>1</sup></a>
</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gesistsa/oolong/blob/v0.6/vignettes/overview.Rmd" class="external-link"><code>vignettes/overview.Rmd</code></a></small>
      <div class="d-none name"><code>overview.Rmd</code></div>
    </div>

    
    
<p>The validation test is called “oolong test” (for reading tea leaves).
This package provides several functions for generating different types
of oolong test.</p>
<table class="table">
<colgroup>
<col width="7%">
<col width="92%">
</colgroup>
<thead><tr class="header">
<th align="right">function</th>
<th align="left">purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right"><code><a href="../reference/create_oolong.html">wi()</a></code></td>
<td align="left">validating a topic model with <a href="#word-intrusion-test">word intrusion test</a> (Chang et al.,
2008)</td>
</tr>
<tr class="even">
<td align="right"><code><a href="../reference/create_oolong.html">ti()</a></code></td>
<td align="left">validating a topic model with <a href="#topic-intrusion-test">topic intrusion test</a> (Chang et al.,
2008; aka “T8WSI” in Ying et al. 2021)</td>
</tr>
<tr class="odd">
<td align="right"><code><a href="../reference/create_oolong.html">witi()</a></code></td>
<td align="left">validating a topic model with <a href="#word-intrusion-test">word intrusion test</a> and <a href="#topic-intrusion-test">topic intrusion test</a>
</td>
</tr>
<tr class="even">
<td align="right"><code><a href="../reference/create_oolong.html">wsi()</a></code></td>
<td align="left">validating a topic model with <a href="#word-set-intrusion-test">word set intrusion test</a> (Ying et
al. 2021)</td>
</tr>
<tr class="odd">
<td align="right"><code><a href="../reference/create_oolong.html">gs()</a></code></td>
<td align="left">oolong test for <a href="#creating-gold-standard">creating gold standard</a> (see Song et
al., 2020)</td>
</tr>
</tbody>
</table>
<p>All of these tests can also be generated with the function <a href="#backward-compatibility"><code>create_oolong</code></a>. As of
version 0.3.20, it is no longer recommended.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Because the package is constantly changing, we suggest using the
development version from <a href="https://github.com/" class="external-link">GitHub</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"chainsawriot/oolong"</span><span class="op">)</span></span></code></pre></div>
<p>You can also install the “stable” (but slightly older) version from
CRAN:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"oolong"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="validating-topic-models">Validating Topic Models<a class="anchor" aria-label="anchor" href="#validating-topic-models"></a>
</h2>
<div class="section level4">
<h4 id="word-intrusion-test">Word intrusion test<a class="anchor" aria-label="anchor" href="#word-intrusion-test"></a>
</h4>
<p><code>abstracts_seededlda</code> is an example topic model trained
with the data <code>abstracts</code> using the <code>seededlda</code>
package. Currently, this package supports structural topic models /
correlated topic models from <code>stm</code>, Warp LDA models from
<code>text2vec</code> , LDA/CTM models from <code>topicmodels</code>,
Biterm Topic Models from <code>BTM</code>, Keyword Assisted Topic Models
from <code>keyATM</code>, and seeded LDA models from
<code>seededlda</code>. Although not strictly a topic model, Naive Bayes
models from <code>quanteda.textmodels</code> are also supported. See the
section on <a href="#about-naive-bayes">Naive Bayes</a> for more
information.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gesistsa.github.io/oolong/">oolong</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/koheiw/seededlda" class="external-link">seededlda</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: quanteda</span></span>
<span><span class="co">#&gt; Package version: 4.0.2</span></span>
<span><span class="co">#&gt; Unicode version: 14.0</span></span>
<span><span class="co">#&gt; ICU version: 70.1</span></span>
<span><span class="co">#&gt; Parallel computing: disabled</span></span>
<span><span class="co">#&gt; See https://quanteda.io for tutorials and examples.</span></span>
<span><span class="co">#&gt; Loading required package: proxyC</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'proxyC'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     dist</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'seededlda'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     terms</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io" class="external-link">quanteda</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">abstracts_seededlda</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lda(x = x, k = k, label = label, max_iter = max_iter, alpha = alpha, </span></span>
<span><span class="co">#&gt;     beta = beta, seeds = seeds, words = NULL, verbose = verbose)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 10 topics; 2,500 documents; 3,908 features.</span></span></code></pre></div>
<p>To create an oolong test with word intrusion test, use the function
<code>wi</code>. It is recommended to provide a user id of coder who are
going to be doing the test.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_oolong.html">wi</a></span><span class="op">(</span><span class="va">abstracts_seededlda</span>, userid <span class="op">=</span> <span class="st">"Hadley"</span><span class="op">)</span></span>
<span><span class="va">oolong_test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (topic model)</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ✔ <span style="font-weight: bold;">WI</span> ✖ <span style="font-weight: bold;">TI</span> ✖ <span style="font-weight: bold;">WSI</span></span></span>
<span><span class="co">#&gt; ☺ Hadley</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">WI:</span> k = 10, 0 coded.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Methods</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$do_word_intrusion_test()&gt;</span>: do word intrusion test</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$lock()&gt;</span>: finalize and see the results</span></span></code></pre></div>
<p>As instructed, use the method <code>$do_word_intrusion_test()</code>
to start coding.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span><span class="op">$</span><span class="fu">do_word_intrusion_test</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can pause the test by clicking the “Exit” button. Your progress
will be recorded in the object. If you want to save your progress, just
save the object
(e.g. <code>saveRDS(oolong_test, "oolong_test.RDS")</code>). To resume
the test, launch the test again.</p>
<p>After the coding (all items are coded), you need to press the “Exit”
button to quit the coding interface and then lock the test. Then, you
can look at the model precision by printing the oolong test.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span><span class="op">$</span><span class="fu">lock</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">oolong_test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (topic model)</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ✔ <span style="font-weight: bold;">WI</span> ✖ <span style="font-weight: bold;">TI</span> ✖ <span style="font-weight: bold;">WSI</span></span></span>
<span><span class="co">#&gt; ☺ Hadley</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">WI:</span> k = 10, 10 coded.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Results:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> 90%  precision</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="word-set-intrusion-test">Word set intrusion test<a class="anchor" aria-label="anchor" href="#word-set-intrusion-test"></a>
</h4>
<p>Word set intrusion test is a variant of word intrusion test (Ying et
al., 2021), in which multiple word sets generated from top terms of one
topic are juxtaposed with one intruder word set generated similarly from
another topic. In Ying et al., this test is called “R4WSI” because 4
word sets are displayed. By default, oolong generates also R4WSI.
However, it is also possible to generate R(N)WSI by setting the
parameter <code>n_correct_ws</code> to N - 1.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_oolong.html">wsi</a></span><span class="op">(</span><span class="va">abstracts_seededlda</span>, userid <span class="op">=</span> <span class="st">"Garrett"</span><span class="op">)</span></span>
<span><span class="va">oolong_test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (topic model)</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ✖ <span style="font-weight: bold;">WI</span> ✖ <span style="font-weight: bold;">TI</span> ✔ <span style="font-weight: bold;">WSI</span></span></span>
<span><span class="co">#&gt; ☺ Garrett</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">WSI:</span> n = 10, 0 coded.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Methods</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$do_word_set_intrusion_test()&gt;</span>: do word set intrusion test</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$lock()&gt;</span>: finalize and see the results</span></span></code></pre></div>
<p>Use the method <code>$do_word_set_intrusion_test()</code> to start
coding.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span><span class="op">$</span><span class="fu">do_word_set_intrusion_test</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span><span class="op">$</span><span class="fu">lock</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">oolong_test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (topic model)</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ✖ <span style="font-weight: bold;">WI</span> ✖ <span style="font-weight: bold;">TI</span> ✔ <span style="font-weight: bold;">WSI</span></span></span>
<span><span class="co">#&gt; ☺ Garrett</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">WSI:</span> n = 10, 10 coded.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Results:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> 90%  precision (WSI)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="topic-intrusion-test">Topic intrusion test<a class="anchor" aria-label="anchor" href="#topic-intrusion-test"></a>
</h4>
<p>For example, <code>abstracts_seededlda</code> was generated with the
corpus <code>abstracts$text</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="va">abstracts</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,500 × 1</span></span></span>
<span><span class="co">#&gt;    text                                                                         </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> This study explores the benefits and risks featured in medical tourism broke…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> This article puts forth the argument that with the transfer of stock trading…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> The purpose of this study was to evaluate the effect the visual fidelity of …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Among the many health issues relevant to college students, overconsumption o…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> This address, delivered at ICA's 50th anniversary conference, calls on the a…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> The Internet has often been used to reach men who have sex with men (MSMs) i…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> This article argues that the literature describing the internet revolution i…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> This research study examined Bud Goodall's online health narrative as a case…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Information technology and new media allow for collecting and sharing person…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Using a national, telephone survey of 1,762 adolescents aged 12-17 years, th…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,490 more rows</span></span></span></code></pre></div>
<p>Creating the oolong test object with the corpus used for training the
topic model will generate topic intrusion test cases.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_oolong.html">ti</a></span><span class="op">(</span><span class="va">abstracts_seededlda</span>, <span class="va">abstracts</span><span class="op">$</span><span class="va">text</span>, userid <span class="op">=</span> <span class="st">"Julia"</span><span class="op">)</span></span>
<span><span class="va">oolong_test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (topic model)</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ✖ <span style="font-weight: bold;">WI</span> ✔ <span style="font-weight: bold;">TI</span> ✖ <span style="font-weight: bold;">WSI</span></span></span>
<span><span class="co">#&gt; ☺ Julia</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">TI:</span> n = 25, 0 coded.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Methods</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$do_topic_intrusion_test()&gt;</span>: do topic intrusion test</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$lock()&gt;</span>: finalize and see the results</span></span></code></pre></div>
<p>Similarly, use the <code>$do_topic_intrusion_test</code> to code the
test cases, lock the test with <code>$lock()</code> and then you can
look at the TLO (topic log odds) value by printing the oolong test.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span><span class="op">$</span><span class="fu">do_topic_intrusion_test</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">oolong_test</span><span class="op">$</span><span class="fu">lock</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (topic model)</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ✖ <span style="font-weight: bold;">WI</span> ✔ <span style="font-weight: bold;">TI</span> ✖ <span style="font-weight: bold;">WSI</span></span></span>
<span><span class="co">#&gt; ☺ Julia</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">TI:</span> n = 25, 25 coded.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Results:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> TLO: -0.187</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="suggested-workflow">Suggested workflow<a class="anchor" aria-label="anchor" href="#suggested-workflow"></a>
</h3>
<p>The test makes more sense if more than one coder is involved. A
suggested workflow is to create the test, then clone the oolong object.
Ask multiple coders to do the test(s) and then summarize the
results.</p>
<p>Preprocess and create a document-feature matrix</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://quanteda.io/reference/tokens.html" class="external-link">tokens</a></span><span class="op">(</span><span class="va">abstracts</span><span class="op">$</span><span class="va">text</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span>, remove_symbols <span class="op">=</span> <span class="cn">TRUE</span>, remove_numbers <span class="op">=</span> <span class="cn">TRUE</span>, remove_url <span class="op">=</span> <span class="cn">TRUE</span>, spilit_hyphens <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">tokens_wordstem</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/tokens_select.html" class="external-link">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm</a></span><span class="op">(</span>tolower <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/dfm_trim.html" class="external-link">dfm_trim</a></span><span class="op">(</span>min_docfreq <span class="op">=</span> <span class="fl">3</span>, max_docfreq <span class="op">=</span> <span class="fl">500</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/dfm_select.html" class="external-link">dfm_select</a></span><span class="op">(</span>min_nchar <span class="op">=</span> <span class="fl">3</span>, pattern <span class="op">=</span> <span class="st">"^[a-zA-Z]+$"</span>, valuetype <span class="op">=</span> <span class="st">"regex"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">abstracts_dfm</span></span></code></pre></div>
<p>Train a topic model.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/koheiw/seededlda" class="external-link">seededlda</a></span><span class="op">)</span></span>
<span><span class="va">abstracts_seededlda</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://koheiw.github.io/seededlda/reference/textmodel_seededlda.html" class="external-link">textmodel_seededlda</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">abstracts_dfm</span>, dictionary <span class="op">=</span> <span class="fu"><a href="https://quanteda.io/reference/dictionary.html" class="external-link">dictionary</a></span><span class="op">(</span><span class="va">abstracts_dictionary</span><span class="op">)</span>, seeds <span class="op">=</span> <span class="fl">46709394</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Create a new oolong object.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test_rater1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_oolong.html">witi</a></span><span class="op">(</span><span class="va">abstracts_seededlda</span>, <span class="va">abstracts</span><span class="op">$</span><span class="va">text</span>, userid <span class="op">=</span> <span class="st">"Yihui"</span><span class="op">)</span></span></code></pre></div>
<p>Clone the oolong object to be used by other raters.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test_rater2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/clone_oolong.html">clone_oolong</a></span><span class="op">(</span><span class="va">oolong_test_rater1</span>, userid <span class="op">=</span> <span class="st">"Jenny"</span><span class="op">)</span></span></code></pre></div>
<p>Ask different coders to code each object and then lock the
object.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Let Yihui do the test.</span></span>
<span><span class="va">oolong_test_rater1</span><span class="op">$</span><span class="fu">do_word_intrusion_test</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">oolong_test_rater1</span><span class="op">$</span><span class="fu">do_topic_intrusion_test</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">oolong_test_rater1</span><span class="op">$</span><span class="fu">lock</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Let Jenny do the test.</span></span>
<span><span class="va">oolong_test_rater2</span><span class="op">$</span><span class="fu">do_word_intrusion_test</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">oolong_test_rater2</span><span class="op">$</span><span class="fu">do_topic_intrusion_test</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">oolong_test_rater2</span><span class="op">$</span><span class="fu">lock</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Get a summary of the two objects.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/summarize_oolong.html">summarize_oolong</a></span><span class="op">(</span><span class="va">oolong_test_rater1</span>, <span class="va">oolong_test_rater2</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Summary (topic model):</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Word intrusion test</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Mean model precision: 0.25</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Quantiles of model precision: 0.2, 0.225, 0.25, 0.275, 0.3</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> P-value of the model precision</span></span>
<span><span class="co">#&gt; (H0: Model precision is not better than random guess): 0.3656</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Krippendorff's alpha: 0.747</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> K Precision:</span></span>
<span><span class="co">#&gt; 0, 0.5, 1, 0, 0, 0, 0, 0, 0, 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Topic intrusion test</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Mean TLO: -1.5</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Median TLO: -1.12</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Quantiles of TLO: -4.71, -2.83, -1.12, 0, 0</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> P-Value of the median TLO </span></span>
<span><span class="co">#&gt; (H0: Median TLO is not better than random guess): 0.114</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="about-the-p-values">About the p-values<a class="anchor" aria-label="anchor" href="#about-the-p-values"></a>
</h3>
<p>The test for model precision (MP) is based on an one-tailed,
one-sample binomial test for each rater. In a multiple-rater situation,
the p-values from all raters are combined using the Fisher’s method
(a.k.a. Fisher’s omnibus test).</p>
<p>H0: MP is not better than 1/ (n_top_terms + 1)</p>
<p>H1: MP is better than 1/ (n_top_terms + 1)</p>
<p>The test for the median of TLO is based on a permutation test.</p>
<p>H0: Median TLO is not better than random guess.</p>
<p>H1: Median TLO is better than random guess.</p>
<p>One must notice that the two statistical tests are testing the bear
minimum. A significant test only indicates the topic model can make the
rater(s) perform better than random guess. It is not an indication of
good topic interpretability. Also, one should use a very conservative
significant level,
e.g. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>&lt;</mo><mn>0.001</mn></mrow><annotation encoding="application/x-tex">\alpha &lt; 0.001</annotation></semantics></math>.</p>
</div>
</div>
<div class="section level2">
<h2 id="about-biterm-topic-model">About Biterm Topic Model<a class="anchor" aria-label="anchor" href="#about-biterm-topic-model"></a>
</h2>
<p>Please refer to the vignette about BTM.</p>
</div>
<div class="section level2">
<h2 id="about-naive-bayes">About Naive Bayes<a class="anchor" aria-label="anchor" href="#about-naive-bayes"></a>
</h2>
<p>Naive Bayes model is a supervised machine learning model. This
package supports Naive Bayes models trained using
<code>quanteda.textmodels</code>.</p>
<p>Suppose <code>newsgroup_nb</code> is a Naive Bayes model trained on a
subset of the classic [20 newsgroups] dataset.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://quanteda.io/reference/tokens.html" class="external-link">tokens</a></span><span class="op">(</span><span class="va">newsgroup5</span><span class="op">$</span><span class="va">text</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span>, remove_symbols <span class="op">=</span> <span class="cn">TRUE</span>, remove_numbers <span class="op">=</span> <span class="cn">TRUE</span>, remove_url <span class="op">=</span> <span class="cn">TRUE</span>, spilit_hyphens <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">tokens_wordstem</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/tokens_select.html" class="external-link">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm</a></span><span class="op">(</span>tolower <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/dfm_trim.html" class="external-link">dfm_trim</a></span><span class="op">(</span>min_termfreq <span class="op">=</span> <span class="fl">3</span>, max_docfreq <span class="op">=</span> <span class="fl">0.06</span>, docfreq_type <span class="op">=</span> <span class="st">"prop"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">newsgroup_dfm</span></span>
<span><span class="fu"><a href="https://quanteda.io/reference/docvars.html" class="external-link">docvars</a></span><span class="op">(</span><span class="va">newsgroup_dfm</span>, <span class="st">"group"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">newsgroup5</span><span class="op">$</span><span class="va">title</span></span>
<span><span class="va">newsgroup_nb</span> <span class="op">&lt;-</span> <span class="fu">textmodel_nb</span><span class="op">(</span><span class="va">newsgroup_dfm</span>, <span class="fu"><a href="https://quanteda.io/reference/docvars.html" class="external-link">docvars</a></span><span class="op">(</span><span class="va">newsgroup_dfm</span>, <span class="st">"group"</span><span class="op">)</span>, distribution <span class="op">=</span> <span class="st">"Bernoulli"</span><span class="op">)</span></span></code></pre></div>
<p>You can still generate word intrusion and word set intrusion
tests.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/create_oolong.html">wi</a></span><span class="op">(</span><span class="va">newsgroup_nb</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (topic model)</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ✔ <span style="font-weight: bold;">WI</span> ✖ <span style="font-weight: bold;">TI</span> ✖ <span style="font-weight: bold;">WSI</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">WI:</span> k = 20, 0 coded.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Methods</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$do_word_intrusion_test()&gt;</span>: do word intrusion test</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$lock()&gt;</span>: finalize and see the results</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/create_oolong.html">wsi</a></span><span class="op">(</span><span class="va">newsgroup_nb</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (topic model)</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ✖ <span style="font-weight: bold;">WI</span> ✖ <span style="font-weight: bold;">TI</span> ✔ <span style="font-weight: bold;">WSI</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">WSI:</span> n = 20, 0 coded.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Methods</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$do_word_set_intrusion_test()&gt;</span>: do word set intrusion test</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$lock()&gt;</span>: finalize and see the results</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="validating-dictionary-based-methods">Validating Dictionary-based Methods<a class="anchor" aria-label="anchor" href="#validating-dictionary-based-methods"></a>
</h2>
<div class="section level3">
<h3 id="creating-gold-standard">Creating gold standard<a class="anchor" aria-label="anchor" href="#creating-gold-standard"></a>
</h3>
<p><code>trump2k</code> is a dataset of 2,000 tweets from
@realdonaldtrump.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">trump2k</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,000 × 1</span></span></span>
<span><span class="co">#&gt;    text                                                                         </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> <span style="color: #949494;">"</span>In just out book, Secret Service Agent Gary Byrne doesn't believe that Croo…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> <span style="color: #949494;">"</span>Hillary Clinton has announced that she is letting her husband out to campai…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> <span style="color: #949494;">"</span>\"@TheBrodyFile: Always great to visit with @TheBrodyFile one-on-one with \…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> <span style="color: #949494;">"</span>Explain to @brithume and @megynkelly, who know nothing, that I will beat Hi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> <span style="color: #949494;">"</span>Nobody beats me on National Security. https://t.co/sCrj4Ha1I5<span style="color: #949494;">"</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> <span style="color: #949494;">"</span>\"@realbill2016: @realDonaldTrump @Brainykid2010 @shl Trump leading LA Time…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> <span style="color: #949494;">"</span>\"@teapartynews: Trump Wins Tea Party Group's 'Nashville Straw Poll' - News…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> <span style="color: #949494;">"</span>Big Republican Dinner tonight at Mar-a-Lago in Palm Beach. I will be there!<span style="color: #949494;">"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> <span style="color: #949494;">"</span>.@HillaryClinton loves to lie. America has had enough of the CLINTON'S! It …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> <span style="color: #949494;">"</span>\"@brianstoya: @realDonaldTrump For POTUS #2016\"<span style="color: #949494;">"</span>                          </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,990 more rows</span></span></span></code></pre></div>
<p>For example, you are interested in studying the sentiment of these
tweets. One can use tools such as AFINN to automatically extract
sentiment in these tweets. However, oolong recommends to generate gold
standard by human coding first using a subset. By default, oolong
selects 1% of the origin corpus as test cases. The parameter
<code>construct</code> should be an adjective, e.g. positive, liberal,
populistic, etc.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_oolong.html">gs</a></span><span class="op">(</span>input_corpus <span class="op">=</span> <span class="va">trump2k</span>, construct <span class="op">=</span> <span class="st">"positive"</span>, userid <span class="op">=</span> <span class="st">"Joe"</span><span class="op">)</span></span>
<span><span class="va">oolong_test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (gold standard generation)</span> <span style="color: #00BBBB;">───────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ☺ Joe</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">GS:</span> n = 20, 0 coded.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">Construct:</span>  positive.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Methods</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$do_gold_standard_test()&gt;</span>: generate gold standard</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$lock()&gt;</span>: finalize this object and see the results</span></span></code></pre></div>
<p>As instructed, use the method <code>$do_gold_standard_test()</code>
to start coding.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span><span class="op">$</span><span class="fu">do_gold_standard_test</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>After the coding, you need to first lock the test and then the
<code>$turn_gold()</code> method is available.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span><span class="op">$</span><span class="fu">lock</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">oolong_test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">oolong (gold standard generation)</span> <span style="color: #00BBBB;">───────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ☺ Joe</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">GS:</span> n = 20, 20 coded.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="font-weight: bold;">Construct:</span>  positive.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Methods</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">&lt;$turn_gold()&gt;</span>: convert the test results into a quanteda corpus</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-validating-afinn-using-the-gold-standard">Example: Validating AFINN using the gold standard<a class="anchor" aria-label="anchor" href="#example-validating-afinn-using-the-gold-standard"></a>
</h3>
<p>A locked oolong test can be converted into a quanteda-compatible
corpus for further analysis. The corpus contains two
<code>docvars</code>, ‘answer’.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oolong_test</span><span class="op">$</span><span class="fu">turn_gold</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Corpus consisting of 20 documents and 1 docvar.</span></span>
<span><span class="co">#&gt; text1 :</span></span>
<span><span class="co">#&gt; "Thank you Eau Claire, Wisconsin.  #VoteTrump on Tuesday, Apr..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; text2 :</span></span>
<span><span class="co">#&gt; ""@bobby990r_1: @realDonaldTrump would lead polls the second ..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; text3 :</span></span>
<span><span class="co">#&gt; ""@KdanielsK: @misstcassidy @AllAboutTheTea_ @realDonaldTrump..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; text4 :</span></span>
<span><span class="co">#&gt; "Thank you for a great afternoon Birmingham, Alabama! #Trump2..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; text5 :</span></span>
<span><span class="co">#&gt; ""@THETAINTEDT: @foxandfriends @realDonaldTrump Trump 2016 ht..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; text6 :</span></span>
<span><span class="co">#&gt; "People believe CNN these days almost as little as they belie..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [ reached max_ndoc ... 14 more documents ]</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Access the answer from the coding with quanteda::docvars(obj, 'answer')</span></span></code></pre></div>
<p>In this example, we calculate the AFINN score for each tweet using
quanteda. The dictionary <code>afinn</code> is bundle with this
package.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gold_standard</span> <span class="op">&lt;-</span> <span class="va">oolong_test</span><span class="op">$</span><span class="fu">turn_gold</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">gold_standard</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/tokens.html" class="external-link">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/dfm_lookup.html" class="external-link">dfm_lookup</a></span><span class="op">(</span><span class="va">afinn</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/convert.html" class="external-link">convert</a></span><span class="op">(</span>to <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>matching_word_valence <span class="op">=</span> <span class="op">(</span><span class="va">neg5</span> <span class="op">*</span> <span class="op">-</span><span class="fl">5</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">neg4</span> <span class="op">*</span> <span class="op">-</span><span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">neg3</span> <span class="op">*</span> <span class="op">-</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">neg2</span> <span class="op">*</span> <span class="op">-</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">neg1</span> <span class="op">*</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span>           <span class="op">+</span> <span class="op">(</span><span class="va">zero</span> <span class="op">*</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos1</span> <span class="op">*</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos2</span> <span class="op">*</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos3</span> <span class="op">*</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos4</span> <span class="op">*</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos5</span> <span class="op">*</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>           base <span class="op">=</span> <span class="fu"><a href="https://quanteda.io/reference/ntoken.html" class="external-link">ntoken</a></span><span class="op">(</span><span class="va">gold_standard</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, afinn_score <span class="op">=</span> <span class="va">matching_word_valence</span> <span class="op">/</span> <span class="va">base</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">afinn_score</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">all_afinn_score</span></span>
<span><span class="va">all_afinn_score</span></span>
<span><span class="co">#&gt;       text1       text2       text3       text4       text5       text6 </span></span>
<span><span class="co">#&gt;  0.33333333 -0.09090909 -0.16666667  0.45454545  0.00000000  0.00000000 </span></span>
<span><span class="co">#&gt;       text7       text8       text9      text10      text11      text12 </span></span>
<span><span class="co">#&gt;  0.16666667  0.38461538  0.00000000  0.38461538 -0.29166667  0.00000000 </span></span>
<span><span class="co">#&gt;      text13      text14      text15      text16      text17      text18 </span></span>
<span><span class="co">#&gt;  0.50000000  0.07142857  0.00000000 -0.12000000  0.28571429  0.16000000 </span></span>
<span><span class="co">#&gt;      text19      text20 </span></span>
<span><span class="co">#&gt;  0.36842105  0.38888889</span></span></code></pre></div>
<p>Put back the vector of AFINN score into the respective
<code>docvars</code> and study the correlation between the gold standard
and AFINN.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/summarize_oolong.html">summarize_oolong</a></span><span class="op">(</span><span class="va">oolong_test</span>, target_value <span class="op">=</span> <span class="va">all_afinn_score</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Summary (gold standard generation):</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">─────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Correlation: 0.718 (p = 4e-04)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Effect of content length: -0.323 (p = 0.1643)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `` -&gt; `...1`</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="suggested-workflow-1">Suggested workflow<a class="anchor" aria-label="anchor" href="#suggested-workflow-1"></a>
</h3>
<p>Create an oolong object, clone it for another coder. According to
Song et al. (2020), you should at least draw 1% of your data.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trump</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_oolong.html">gs</a></span><span class="op">(</span>input_corpus <span class="op">=</span> <span class="va">trump2k</span>, exact_n <span class="op">=</span> <span class="fl">40</span>, userid <span class="op">=</span> <span class="st">"JJ"</span><span class="op">)</span></span>
<span><span class="va">trump2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/clone_oolong.html">clone_oolong</a></span><span class="op">(</span><span class="va">trump</span>, userid <span class="op">=</span> <span class="st">"Winston"</span><span class="op">)</span></span></code></pre></div>
<p>Instruct two coders to code the tweets and lock the objects.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trump</span><span class="op">$</span><span class="fu">do_gold_standard_test</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">trump2</span><span class="op">$</span><span class="fu">do_gold_standard_test</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">trump</span><span class="op">$</span><span class="fu">lock</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">trump2</span><span class="op">$</span><span class="fu">lock</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Calculate the target value (in this case, the AFINN score) by turning
one object into a corpus.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gold_standard</span> <span class="op">&lt;-</span> <span class="va">trump</span><span class="op">$</span><span class="fu">turn_gold</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">gold_standard</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/tokens.html" class="external-link">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/dfm_lookup.html" class="external-link">dfm_lookup</a></span><span class="op">(</span><span class="va">afinn</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/convert.html" class="external-link">convert</a></span><span class="op">(</span>to <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>matching_word_valence <span class="op">=</span> <span class="op">(</span><span class="va">neg5</span> <span class="op">*</span> <span class="op">-</span><span class="fl">5</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">neg4</span> <span class="op">*</span> <span class="op">-</span><span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">neg3</span> <span class="op">*</span> <span class="op">-</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">neg2</span> <span class="op">*</span> <span class="op">-</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">neg1</span> <span class="op">*</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span>           <span class="op">+</span> <span class="op">(</span><span class="va">zero</span> <span class="op">*</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos1</span> <span class="op">*</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos2</span> <span class="op">*</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos3</span> <span class="op">*</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos4</span> <span class="op">*</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">pos5</span> <span class="op">*</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>           base <span class="op">=</span> <span class="fu"><a href="https://quanteda.io/reference/ntoken.html" class="external-link">ntoken</a></span><span class="op">(</span><span class="va">gold_standard</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, afinn_score <span class="op">=</span> <span class="va">matching_word_valence</span> <span class="op">/</span> <span class="va">base</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">afinn_score</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">target_value</span></span></code></pre></div>
<p>Summarize all oolong objects with the target value.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarize_oolong.html">summarize_oolong</a></span><span class="op">(</span><span class="va">trump</span>, <span class="va">trump2</span>, target_value <span class="op">=</span> <span class="va">target_value</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `` -&gt; `...1`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `` -&gt; `...2`</span></span></code></pre></div>
<p>Read the results. The diagnostic plot consists of 4 subplots. It is a
good idea to read Bland &amp; Altman (1986) on the difference between
correlation and agreement.</p>
<ul>
<li>Subplot (top left): Raw correlation between human judgement and
target value. One should want to have a good correlation between the
two.</li>
<li>Subplot (top right): Bland-Altman plot. One should want to have no
correlation. Also, the dots should be randomly scattering around the
mean value. If it is so, the two measurements (human judgement and
target value) are in good agreement.</li>
<li>Subplot (bottom left): Raw correlation between target value and
content length. One should want to have no correlation, as an indication
of good reliability against the influence of content length. (See Chan
et al. 2020)</li>
<li>Subplot (bottom right): Cook’s distance of all data point. One
should want to have no dot (or at least very few dots) above the
threshold. It is an indication of how the raw correlation between human
judgement and target value can or cannot be influenced by extreme values
in your data.</li>
</ul>
<p>The textual output contains the Krippendorff’s alpha of the codings
by your raters. In order to claim validity of your target value, you
must first establish the reliability of your gold standard. Song et
al. (2020) suggest Krippendorff’s Alpha &gt; 0.7 as an acceptable
cut-off.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Summary (gold standard generation):</span> <span style="color: #00BBBB;">─────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Krippendorff's Alpha: 0.931</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Correlation: 0.744 (p = 2e-04)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Effect of content length: -0.323 (p = 0.1643)</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
<p><img src="overview_files/figure-html/diagnosis-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="backward-compatibility">Backward compatibility<a class="anchor" aria-label="anchor" href="#backward-compatibility"></a>
</h2>
<p>Historically, oolong test objects could only be generated with only
one function: <code>create_oolong</code>. It is no longer the case and
no longer recommended anymore. It is still retained for backward
compatibility purposes. If you still need to use
<code><a href="../reference/create_oolong.html">create_oolong()</a></code>, the most important parameters are
<code>input_model</code> and <code>input_corpus</code>. Setting each of
them to <code>NULL</code> generates different tests.</p>
<table class="table">
<colgroup>
<col width="8%">
<col width="8%">
<col width="82%">
</colgroup>
<thead><tr class="header">
<th>input_model</th>
<th align="center">input_corpus</th>
<th>output</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Not NULL</td>
<td align="center">NULL</td>
<td>oolong test for validating a topic model with <a href="#word-intrusion-test">word intrusion test</a>
</td>
</tr>
<tr class="even">
<td>Not NULL</td>
<td align="center">Not NULL</td>
<td>oolong test for validating a topic model with <a href="#word-intrusion-test">word intrusion test</a> and <a href="#topic-intrusion-test">topic intrusion test</a>
</td>
</tr>
<tr class="odd">
<td>NULL</td>
<td align="center">Not NULL</td>
<td>oolong test for <a href="#creating-gold-standard">creating gold
standard</a>
</td>
</tr>
<tr class="even">
<td>NULL</td>
<td align="center">NULL</td>
<td>error</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Chang, J., Gerrish, S., Wang, C., Boyd-Graber, J. L., &amp; Blei, D.
M. (2009). Reading tea leaves: How humans interpret topic models. In
Advances in neural information processing systems (pp. 288-296). <a href="https://papers.nips.cc/paper/3700-reading-tea-leaves-how-humans-interpret-topic-models" class="external-link">link</a>
</li>
<li>Ying, L., Montgomery, J. M., &amp; Stewart, B. M. (2021). Inferring
concepts from topics: Towards procedures for validating topics as
measures. Political Analysis. <a href="https://doi.org/10.1017/pan.2021.33" class="external-link">link</a>
</li>
<li>Song et al. (2020) In validations we trust? The impact of imperfect
human annotations as a gold standard on the quality of validation of
automated content analysis. Political Communication. <a href="https://doi.org/10.1080/10584609.2020.1723752" class="external-link">link</a>
</li>
<li>Bland, J. M., &amp; Altman, D. (1986). Statistical methods for
assessing agreement between two methods of clinical measurement. The
lancet, 327(8476), 307-310.</li>
<li>Chan et al. (2020) Four best practices for measuring news sentiment
using ‘off-the-shelf’ dictionaries: a large-scale p-hacking experiment.
Computational Communication Research. <a href="https://osf.io/preprints/socarxiv/np5wa/" class="external-link">link</a>
</li>
<li>Nielsen, F. Å. (2011). A new ANEW: Evaluation of a word list for
sentiment analysis in microblogs. arXiv preprint arXiv:1103.2903. <a href="https://arxiv.org/abs/1103.2903" class="external-link">link</a>
</li>
</ol>
<hr>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Maintained by <a href="https://github.com/gesistsa" class="external-link"><img alt="TSA Team" src="https://raw.githubusercontent.com/gesistsa/.github/main/tsa_logo.png" width="20"> Transparent Social Analytics Team, GESIS</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Developed by <a href="http://www.chainsawriot.com" class="external-link">Chung-hong Chan</a>, Marius Sältzer.</p>
</div>

    </footer>
</div>





  </body>
</html>
